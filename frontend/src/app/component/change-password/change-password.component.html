<div class="page-title m-b">
  <h1 class="inline m-a-0" style="padding-left: 50px">Change Password</h1>
</div>

<div class="container">
  <div class="b-t" style="margin-top: 10px; margin-left: 50px">
    <div class="p-a-md">
      <form [formGroup]="ChangePassForm">

        <div class="form-group row">
          <!--          <div class="font-weight-bold col-sm-3 form-control-label text-muted">Current Password:</div>-->
          <div class="col-lg-6" style="float:none;margin:auto;">
            <mat-form-field appearance="fill" class="example-full-width">
              <mat-label>Current Password:</mat-label>
              <input [class.input-invalid]="ChangePassForm.get('password')!.invalid && ChangePassForm.get('password')!.touched" [class.input-valid]="ChangePassForm.get('password')!.valid && ChangePassForm.get('password')!.touched" class="form-control" formControlName="password" matInput placeholder="Current Password" type="password">
              <div *ngIf="ChangePassForm.get('password')!.invalid && ChangePassForm.get('password')!.touched" style="margin-top: 10px;color: red; text-align: left !important;">
                <div *ngIf="ChangePassForm.get('password').hasError('required')">
                  <div [@shake]="shake">
                    Current Password is <strong>required.</strong>
                  </div>
                </div>
                <div *ngIf="ChangePassForm.get('password').hasError('minlength')">
                  <div [@shake]="shake">Current Password must be at least <strong>6 characters long.</strong>
                  </div>
                </div>
                <div *ngIf="ChangePassForm.get('password').hasError('maxlength')">
                  <div [@shake]="shake">Current Password can be max <strong>10 characters long.</strong>
                  </div>
                </div>
              </div>
            </mat-form-field>
          </div>
        </div>

        <div class="form-group row">
          <!--          <div class="font-weight-bold col-sm-3 form-control-label text-muted">New Password:</div>-->
          <div class="col-lg-6" style="float:none;margin:auto;">
            <mat-form-field appearance="fill" class="example-full-width">
              <mat-label>New Password:</mat-label>
              <input [class.input-invalid]="ChangePassForm.get('new_password')!.invalid && ChangePassForm.get('new_password')!.touched" [class.input-valid]="ChangePassForm.get('new_password')!.valid && ChangePassForm.get('new_password')!.touched" class="form-control" formControlName="new_password" matInput placeholder="New Password" type="password">
              <div *ngIf="isSamePass" style="margin-top: 10px;color: red; text-align: left !important;">
                <div [@shake]="shake">Your new password must be different from your <strong>previous password.</strong>
                </div>
              </div>
              <div *ngIf="ChangePassForm.hasError('passwordmatch')" style="margin-top: 10px;color: red; text-align: left !important;">
                <div [@shake]="shake">
                  Your new password must be different from your <strong>previous password.</strong>
                </div>
              </div>
              <div *ngIf="ChangePassForm.get('new_password')!.invalid && ChangePassForm.get('new_password')!.touched" style="margin-top: 10px;color: red; text-align: left !important;">
                <div *ngIf="ChangePassForm.get('new_password').hasError('required')">
                  <div [@shake]="shake">
                    New Password is <strong>required.</strong>
                  </div>
                </div>
                <div *ngIf="ChangePassForm.get('new_password').hasError('minlength')">
                  <div [@shake]="shake">Password must be at least <strong>6 characters long.</strong>
                  </div>
                </div>
                <div *ngIf="ChangePassForm.get('new_password').hasError('maxlength')">
                  <div [@shake]="shake">Password can be max <strong>10 characters long.</strong>
                  </div>
                </div>
              </div>
            </mat-form-field>
          </div>
        </div>

        <div class="form-group row">
          <!--          <div class="font-weight-bold col-sm-3 form-control-label text-muted">New Password Confirmation:</div>-->
          <div class="col-lg-6" style="float:none;margin:auto;">
            <mat-form-field appearance="fill" class="example-full-width">
              <mat-label>New Password Confirmation:</mat-label>
              <input [class.input-invalid]="(ChangePassForm.get('confirm_new_password')!.invalid && ChangePassForm.get('confirm_new_password')!.touched) || ChangePassForm.hasError('passwordnotmatch')" [class.input-valid]="ChangePassForm.get('confirm_new_password')!.valid && ChangePassForm.get('confirm_new_password')!.touched && !ChangePassForm.hasError('passwordnotmatch')" class="form-control" formControlName="confirm_new_password" matInput placeholder="New Password Confirmation" type="password">
              <div style="margin-top: 10px;color: red; text-align: left !important;">
                <div *ngIf="ChangePassForm.hasError('passwordnotmatch')">
                  <div [@shake]="shake">
                    New Password confirmation do <strong>not match.</strong>
                  </div>
                </div>
                <div *ngIf="ChangePassForm.get('confirm_new_password')!.invalid && ChangePassForm.get('confirm_new_password')!.touched">
                  <div *ngIf="ChangePassForm.get('confirm_new_password').hasError('required')">
                    <div [@shake]="shake">
                      New Password confirmation is <strong>required.</strong>
                    </div>
                  </div>
                </div>
                <div *ngIf="ChangePassForm.get('confirm_new_password').hasError('minlength')">
                  <div [@shake]="shake">
                    New Password confirmation must be at least <strong>6 characters long.</strong>
                  </div>
                </div>
                <div *ngIf="ChangePassForm.get('confirm_new_password').hasError('maxlength')">
                  <div [@shake]="shake">
                    New Password confirmation can be max <strong>10 characters long.</strong>
                  </div>
                </div>
              </div>
            </mat-form-field>
          </div>
        </div>

        <div class="form-group row">
          <div class="col-lg-6 text-center" style="float:none;margin:auto;">
            <a [routerLink]="['/user/profile', userinfo?.id]" class="btn btn-md dark p-x-md">Cancel</a> &nbsp;
            <button (click)="ngSubmit()" [disabled]="!ChangePassForm.valid" class="btn btn-md black p-x-lg" type="submit">
              Update Password
            </button>
          </div>
        </div>

      </form>
    </div>
  </div>
</div>
