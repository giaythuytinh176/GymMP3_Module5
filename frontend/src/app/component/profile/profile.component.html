<div class="container">
  <b style="text-align: center; font-size: 40px;">
    Cập nhật Profile
  </b>
  <div class="row section">
    <div class="col-xl-6 col-md-12 mx-auto">
      <div class="card">
        <div class="card-header">
          <h6 class="card-title mb-0" style="text-align: center">Edit User</h6>
        </div>
        <div class="card-body">
          <form (ngSubmit)="updateUser()" [formGroup]="profileForm" class="ng-untouched ng-pristine ng-valid">

            <div class="form-row form-group">
              <label class="col-lg-2 text-md-right col-form-label" for="username">Username</label>
              <div class="col-lg-9">
                <input class="form-control" disabled id="username" type="text" value="{{ userinfo?.username }}">
              </div>
            </div>

            <div class="form-row form-group">
              <label class="col-lg-2 text-md-right col-form-label" for="name">Name</label>
              <div class="col-lg-9">
                <input class="form-control" formControlName="name" id="name" type="text">
                <div *ngIf="profileForm.get('name').invalid && profileForm.get('name').touched" style="color: #ff0000">
                  Name is <strong>required</strong>.
                </div>
              </div>
            </div>

            <div class="form-row form-group">
              <label class="col-lg-2 text-md-right col-form-label" for="address">Address</label>
              <div class="col-lg-9">
                <input class="form-control" formControlName="address" id="address" type="text">
                <div *ngIf="profileForm.get('address').invalid && profileForm.get('address').touched"
                     style="color: #ff0000">
                  Address is <strong>required</strong>.
                </div>
              </div>
            </div>

            <div class="form-row form-group">
              <label class="col-lg-2 text-md-right col-form-label" for="email">Email</label>
              <div class="col-lg-9">
                <input class="form-control" formControlName="email" id="email" type="text">
                <div *ngIf="profileForm.get('email').invalid && profileForm.get('email').touched" style="color: red">
                  <div *ngIf="profileForm.get('email').hasError('required')">
                    Email is <strong>required</strong>.
                  </div>
                  <div *ngIf="profileForm.get('email').hasError('email')" style="color: red">
                    Please enter a <strong>valid email.</strong>
                  </div>
                </div>
              </div>
            </div>

            <div class="form-row form-group">
              <label class="col-lg-2 text-md-right col-form-label" for="phone">Phone Number</label>
              <div class="col-lg-9">
                <input class="form-control" formControlName="phone" id="phone" type="text">
                <div *ngIf="profileForm.get('phone').invalid && profileForm.get('phone').touched"
                     style="color: red">
                  Phone is <strong>required</strong>.
                </div>
              </div>
            </div>

            <div class="form-row form-group">
              <label class="col-lg-2 text-md-right col-form-label" for="phone">Avatar</label>
              <div class="col-lg-9">
                <label class="label-input" for="avatar">
                  <div *ngIf="firebase.fileToUpload; else NoSelect">
                    Filename: {{ firebase.fileToUpload.name }}
                  </div>
                  <ng-template #NoSelect>
                    Choose File
                  </ng-template>
                  <input (change)="firebase.handleFileInput($event)" accept="image/*" autocomplete="off" class="form-control"
                         formControlName="avatar"
                         id="avatar"
                         type="file"
                  />
                </label>

                <div *ngIf="firebase.percentage | async as pct">
                  <!--  <mat-progress-bar mode="determinate" [value]="pct"></mat-progress-bar>-->
                  <div class="col-12">
                    <div class="progress">
                      <div [ngStyle]="{ width: pct + '%' }" aria-valuemax="100"
                           aria-valuemin="0" aria-valuenow="{{ pct | number }}" class="progress-bar progress-bar-info progress-bar-striped"
                           role="progressbar"> {{ pct | number }}%
                      </div>
                    </div>
                  </div>
                  <img [src]="firebase.fb" class="img-thumbnail img-fluid"><br>
                </div>

                <div *ngIf="profileForm.get('avatar').invalid && profileForm.get('avatar').touched"
                     style="color: red">
                  Avatar is <strong>required</strong>.
                </div>
              </div>
            </div>

            <div class="row">
              <div class="col-lg-3"></div>
              <div class="col-lg-9 btn-inline">
                <button class="btn btn-outline-secondary" type="button">Cancel</button>
                &nbsp;
                <button [disabled]="!profileForm.valid" class="btn btn-outline-success" type="submit">Update user
                </button>
              </div>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
